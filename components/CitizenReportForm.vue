<template>
  <div class="bg-white rounded-lg shadow-lg p-6">
    <h2 class="text-2xl font-bold mb-4">üë• –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ</h2>
    
    <form @submit.prevent="submitReport" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–¥–æ—ë–º</label>
        <select v-model="form.waterBody" class="w-full p-3 border border-gray-300 rounded-lg">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–¥–æ—ë–º...</option>
          <option v-for="water in waterBodies" :key="water.id" :value="water.id">
            {{ water.name }}
          </option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">–¢–∏–ø –ø—Ä–æ–±–ª–µ–º—ã</label>
        <select v-model="form.problemType" class="w-full p-3 border border-gray-300 rounded-lg">
          <option value="pollution">–ó–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ</option>
          <option value="odor">–ù–µ–ø—Ä–∏—è—Ç–Ω—ã–π –∑–∞–ø–∞—Ö</option>
          <option value="waste">–ú—É—Å–æ—Ä</option>
          <option value="fish_death">–ì–∏–±–µ–ª—å —Ä—ã–±—ã</option>
          <option value="other">–î—Ä—É–≥–æ–µ</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</label>
        <textarea 
          v-model="form.description"
          rows="4"
          class="w-full p-3 border border-gray-300 rounded-lg"
          placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ..."
        ></textarea>
      </div>

      <button 
        type="submit"
        :disabled="!form.waterBody || !form.description"
        class="w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition"
      >
        üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
      </button>
    </form>

    <div v-if="submitted" class="mt-4 p-3 bg-green-50 text-green-700 rounded-lg">
      ‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ
    </div>
  </div>
</template>

<script setup lang="ts">
interface ReportForm {
  waterBody: string;
  problemType: string;
  description: string;
}

const form = ref<ReportForm>({
  waterBody: '',
  problemType: 'pollution',
  description: ''
});

const submitted = ref(false);

const waterBodies = [
  { id: '1', name: '–û–∑–µ—Ä–æ –ü—ë—Å—Ç—Ä–æ–µ' },
  { id: '2', name: '–†–µ–∫–∞ –ò—à–∏–º' },
  { id: '3', name: '–û–∑–µ—Ä–æ –°–æ–ª—ë–Ω–æ–µ' }
];

const submitReport = async () => {
  console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞:', form.value);
  submitted.value = true;
  
  // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
  setTimeout(() => {
    form.value = {
      waterBody: '',
      problemType: 'pollution', 
      description: ''
    };
    submitted.value = false;
  }, 3000);
};
</script>